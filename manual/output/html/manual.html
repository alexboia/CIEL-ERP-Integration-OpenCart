<div class="mp-help-document-contents"><div class="mp-page-contents-block mp-page-index">
	<h1>Introduction</h1>
<p>This extension is built for merchants using NextUp ERP for stock-keeping and accounting,<br />
who also wish to integrate the features provided by NextUp ERP with their online OpenCart store.</p>
<h2>Features</h2>
<h3>Core features</h3>
<ul>
<li>Connecting OpenCart products to NextUp ERP articles:<ul>
<li>single and bulk product stocks sync;</li>
<li>single and bulk product prices sync;</li>
<li>single and bulk product tax information sync.</li>
</ul>
</li>
<li>Connecting OpenCart customers to NextUp ERP partners:<ul>
<li>customers are sent to NextUp whenever an OpenCart order is exported to a NextUp Document (sale order or sale invoice);</li>
<li>ANAF data validation for company-type customers.</li>
</ul>
</li>
<li>Export OpenCart orders as NextUp ERP documents (using either valid or temporary status, either manually or automated):<ul>
<li>sale orders;</li>
<li>sale invoices.</li>
</ul>
</li>
<li>Detailed logging of regular and unusual events (such as errors).</li>
</ul>
<h3>Tools</h3>
<ul>
<li>If you are currently using OpenCart Romania's NextUp integration module, this extension provides a tool for you<br />
to extract existing product associations from its internal data store;</li>
<li>If you are new to NextUp ERP, this extension provides a tool<br />
for you to export your store products in a format understood by NextUp ERP's importer;</li>
<li>If you recently added a considerable amount of new products in NextUp ERP, this extension provides a tool for you<br />
to bring those products quickly in your OpenCart store.</li>
</ul>
<h3>Widgets</h3>
<ul>
<li>Sidebar widget showing the NextUp ERP order export progress.</li>
</ul></div><div class="mp-page-contents-block mp-page-requirements">
	<h1>Requirements</h1>
<h2>OpenCart Compatibility</h2>
<p>Tested with versions 2.3.0.0 to 2.3.0.2.</p>
<h2>General requirements</h2>
<ul>
<li>PHP 7.4.0 or newer;</li>
<li>NextUp ERP with Server component activated (8.38.0 or newer suggested);</li>
<li>Required PHP extensions:<ul>
<li>Reflection</li>
<li>Curl</li>
<li>Json</li>
<li>MbString</li>
<li>Mysqli</li>
<li>Pcre</li>
<li>Spl</li>
<li>Zlib</li>
</ul>
</li>
</ul>
<h2>Required NextUp ERP Server methods</h2>
<ul>
<li>AddPartner;</li>
<li>AddSaleInvoice;</li>
<li>AddSaleOrder;</li>
<li>DeleteDocument;</li>
<li>GetAllArticles;</li>
<li>GetAllPartners;</li>
<li>GetAllStocksForArticles;</li>
<li>GetAllWarehouses;</li>
<li>GetArticleByCode;</li>
<li>GetArticleById;</li>
<li>GetPartnerByCode;</li>
<li>GetPartnerById;</li>
<li>SelectFromView;</li>
<li>UpdatePartner.</li>
</ul>
<h2>NextUp Server Authentication Notes</h2>
<p>If you are accessing the web services exposed by the NextUp ERP server you need to understand<br />
that, regardless of what application you are using to consume them (this extension included),<br />
you need to use a separate NextUp ERP user account for each application.</p>
<p>This is not a strict technical requirement but, if you share a user account between applications,<br />
you will end up with one authentication token overriding a previous one for that account, which,<br />
in turn, will lead to web service method calls for that all token failing.</p>
<h2>Other Notes</h2>
<ul>
<li>Integration with OpenCart Romania's extension is provided as a best-effort implementation:<br />
there are no hard guarantees for correctness or that it will work at all.</li>
<li>Compatibility with other OpenCart modules is not guaranteed,<br />
although this extension does not rely on any 3rd party module.</li>
</ul></div><div class="mp-page-contents-block mp-page-limitations">
	<h1>Limitations</h1>
<ol>
<li>There is no automatic stock update feature;</li>
<li>Migrating connected products from OpenCart Romania's extension is done on a best-effort basis: if the expected structure differs from the actual one, results may differ;</li>
<li>Due to the way OpenCart stores order and order item costs and prices, this extension needs to deduce some costs and prices that NextUp ERP expects, the result being that there may be differences between the OpenCart order costs and prices and NextUp ERP document costs and prices;</li>
<li>Since OpenCart product options don't have reference/SKU codes, they cannot be mapped to NextUp ERP articles/products.</li>
</ol></div><div class="mp-page-contents-block mp-page-sidebar">
	<h1>Sidebar artefacts</h1>
<p>This extension adds a new top level menu item to OpenCart's sidebar, as well as a new widget to OpenCart's existing sidebar progress widget.<br />
See below for more details.</p>
<h2>Menu description</h2>
<p>The top level menu entry for this extension is <code>NextUp ERP</code>, which has the following items:</p>
<ul>
<li><code>Configure</code> - navigate to extension configuration panel;</li>
<li><code>Export products for NextUp Import</code> - navigate to the tool that allows you to export your store products in a format that understood by the NextUp ERP importer tool;</li>
<li><code>Sync products</code> - navigate to the tool that allows you to sync all your product information from NextUp ERP;</li>
<li><code>Import new products</code> - navigate to the tool that allows you to import products that you have recently added to NextUp ERP but not in your store;</li>
<li><code>Migrate from OC Romania</code> - navigate to the tool that allows you to import product connections from OpenCart Romania's NextUp integration module;</li>
<li><code>Status</code> - navigate to the tool that allows you to view the extensions status: basic information, error log and debug log.</li>
</ul>
<h3>Screenshots</h3>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/sidebar-menu.png" alt="Menu entries" title="Menu entries" /></p>
</div>
<div class="mp-page-break"></div>
<h2>Sidebar widgets</h2>
<p>Sidebar widget showing the NextUp ERP order export progress: what is the percentage of your OpenCart orders that have been exported to NextUp.</p>
<h3>Screenshots</h3>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/sidebar-widgets.png" alt="Sidebar widgets" title="Sidebar widgets" /></p>
</div></div><div class="mp-page-contents-block mp-page-installation">
	<h1>Installation</h1>
<h2>Install using the OpenCart interface</h2>
<ol>
<li>Navigate to OpenCart's extension installer via <code>Extensions - Installer</code> menu entry:<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/install-step1.png" alt="Installation Step 1" title="Installation Step 1" /></p>
</div>
</li>
<li>Click the <code>Upload</code> button;</li>
<li>Choose the extension archive file (<code>nextup-opencart-integration.ocmod.zip</code>);</li>
<li>After installation, navigate to <code>Extensions - Modifications</code> and click refresh to fully enable the extension's features:<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/install-step4.png" alt="Installation Step 4" title="Installation Step 4" /></p>
</div>
</li>
<li>Navigate to <code>Extensions - Extensions</code> and chose <code>Modules</code> in the <code>Choose extension type</code> drop-down selector:<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/install-step5.png" alt="Installation Step 5" title="Installation Step 5" /></p>
</div>
</li>
<li>Scroll down to the extension's entry - <code>NextUp ERP Integration</code> - and click the <code>Install</code> button.</li>
</ol></div><div class="mp-page-contents-block mp-page-configure">
	<h1>Configure Extension</h1>
<p>To configure the extension, navigate to <code>NextUp ERP - Configure</code>. There are three sections:</p>
<ul>
<li>NextUp ERP Connection Options - specify the NextUp ERP server address and credentials;</li>
<li>NextUp ERP Integration Options - specify integration options;</li>
<li>NextUp ERP OpenCart Workflow Options - specify workflow options.<div class="mp-page-break"></div>
</li>
</ul>
<h2>NextUp ERP Connection Options</h2>
<p>In this section, you specify the NextUp ERP server address and credentials. The following fields are available:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web service URL</td>
<td>URL</td>
<td>The URL for which NextUp ERP server is configured to listen</td>
</tr>
<tr>
<td>Username</td>
<td>String</td>
<td>The username used for authentication with the NextUp ERP server</td>
</tr>
<tr>
<td>Password</td>
<td>String</td>
<td>The password used for authentication with the NextUp ERP server</td>
</tr>
<tr>
<td>Society code</td>
<td>String</td>
<td>The society code to which the store will be bound to operate</td>
</tr>
<tr>
<td>Timeout</td>
<td>Number</td>
<td>The maximum duration, in seconds, for which any call to NextUp ERP server will be allowed to run</td>
</tr>
</tbody>
</table>
<h3>Screenshots</h3>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/configure-connection.png" alt="Configure Connection" title="Configure Connection" /></p>
</div>
<div class="mp-page-break"></div>
<h2>NextUp ERP Integration Options</h2>
<p>In this section, you specify the main integration options, such as what warehouse to use. The following fields are available:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Warehouse</td>
<td>Option</td>
<td>The warehouse to which this store will be bound to operate</td>
</tr>
<tr>
<td>Issue document type</td>
<td>Option</td>
<td>What document to issue for each OpenCart order</td>
</tr>
<tr>
<td>Automatically issue document for these order statuses</td>
<td>Multiple Option</td>
<td>When an OpenCart order transitions into one of the selected statuses, a document will be automatically issued in NextUp ERP</td>
</tr>
<tr>
<td>Automatically remove document for these order statuses</td>
<td>Multiple Option</td>
<td>When an OpenCart order transitions into one of the selected statuses, the document will be automatically removed from NextUp ERP, if previously issued</td>
</tr>
<tr>
<td>Issue document with status</td>
<td>Option</td>
<td>When a document is issued in NextUp ERP from the store, use this status</td>
</tr>
<tr>
<td>Document due days</td>
<td>Number</td>
<td>When a document is issued in NextUp ERP from the store, use this number of days for calculating the due date, starting from the moment the document is issued</td>
</tr>
<tr>
<td>Shipping VAT Quota</td>
<td>Option</td>
<td>Use this VAT quota for ALL shipping methods in your store. When saved, the extension will attempt to reconfigure all your shipping methods to use this VAT quota. This is necessary to match NextUp ERP vat quotas when adding shipping to documents.</td>
</tr>
</tbody>
</table>
<div class="mp-page-break"></div>
<h3>Screenshots</h3>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/configure-integration.png" alt="Configure Integration" title="Configure Integration" /></p>
</div>
<div class="mp-page-break"></div>
<h2>NextUp ERP OpenCart Workflow Options</h2>
<p>In this section, you specify additional workflow integration options, mostly OpenCart-specific. The following fields are available:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VAT applicable on payment</td>
<td>Yes/No</td>
<td>Whether or not to send the "is vat applicable on payment" flag to NextUp ERP when issuing a document. If not sent, then NextUp will use its default settings.</td>
</tr>
<tr>
<td>Add shipping to document</td>
<td>Yes/No</td>
<td>Whether or not to add shipping cost to the document issued to NextUp ERP.</td>
</tr>
<tr>
<td>Stock status for in-stock products</td>
<td>Option</td>
<td>When the stock quantities are updated from NextUp ERP and some products are found to be in-stock, use this status when updating the product stock status.</td>
</tr>
<tr>
<td>Stock status for out-of-stock products</td>
<td>Option</td>
<td>When the stock quantities are updated from NextUp ERP and some products are found to be out-of-stock, use this status when updating the product stock status.</td>
</tr>
<tr>
<td>Client group used for individuals</td>
<td>Option</td>
<td>OpenCart client group used for customers that are billed as individuals. If there is not per-billing type segregation, then set this to <code>None</code>. You need to creat this customer group yourself.</td>
</tr>
<tr>
<td>Client group used for legal persons</td>
<td>Option</td>
<td>OpenCart client group used for customers that are billed as legal persons/companies. If there is not per-billing type segregation, then set this to <code>None</code>. You need to creat this customer group yourself.</td>
</tr>
<tr>
<td>Custom field used for VAT Code entry</td>
<td>Option</td>
<td>OpenCart custom field used for VAT code entry. The extension will use this when looking up the customer's VAT code. If you don't have any need for this, then set it to <code>None</code>. If You need to creat this field yourself.</td>
</tr>
<tr>
<td>Custom field used for reg. com. number entry</td>
<td>Option</td>
<td>OpenCart custom field used for reg. com. number entry. The extension will use this when looking up the customer's reg. com. number. If you don't have any need for this, then set it to <code>None</code>. If You need to creat this field yourself.</td>
</tr>
<tr>
<td>Custom field used for bank account (IBAN) entry</td>
<td>Option</td>
<td>OpenCart custom field used for bank account number entry. The extension will use this when looking up the customer's bank account number. If you don't have any need for this, then set it to <code>None</code>. If You need to creat this field yourself.</td>
</tr>
<tr>
<td>Custom field used for bank name entry</td>
<td>Option</td>
<td>OpenCart custom field used for bank name entry. The extension will use this when looking up the customer's bank name. If you don't have any need for this, then set it to <code>None</code>. If You need to creat this field yourself.</td>
</tr>
<tr>
<td>Customer group used for NextUp-imported new tax rates</td>
<td>Option</td>
<td>When importing tax rates from NextUp, assign them to this customer group by default. Mandatory.</td>
</tr>
<tr>
<td>Geozone used for NextUp-imported new tax rates</td>
<td>Option</td>
<td>When importing tax rates from NextUp, assign them to this geozone by default. Mandatory.</td>
</tr>
<tr>
<td>Weight class used for NextUp-imported new products</td>
<td>Option</td>
<td>When importing product from NextUp, assign them to this weight class by default. Mandatory.</td>
</tr>
<tr>
<td>Length class used for NextUp-imported new products</td>
<td>Option</td>
<td>When importing product from NextUp, assign them to this length class by default. Mandatory.</td>
</tr>
</tbody>
</table>
<p>Below is a screenshot represeting the relevant section of the configuration page:</p>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/configure-workflow.png" alt="Configure Workflow" title="Configure Workflow" /></p>
</div>
<div class="mp-page-break"></div></div><div class="mp-page-contents-block mp-page-products">
	<h1>Product synchronization</h1>
<p>The products in your OpenCart store and the products in your NextUp ERP instance you currently operate are connected based on the product SKU:<br />
the SKU code in your store must match the product code in your NextUp ERP instance.</p>
<h2>Introduction</h2>
<p>An explicit connection between the products in your store and the products in your NextUp ERP instance must be established before the products can:</p>
<ul>
<li>be updated from NextUp ERP;</li>
<li>be added to documents issued to NextUp ERP from OpenCart orders.</li>
</ul>
<p>This explicit connection is required for the following reasons:</p>
<ul>
<li>because NextUp does not automatically create products when issuing documents (sale invoice or sale order)<br />
so this is a way to insure that only OpenCart orders for which a document can actually be issued<br />
are allowed to be exported to NextUp ERP;</li>
<li>to allow you to have products in your store that are not present in NextUp ERP, and viceversa;</li>
<li>as an optimization, because only connected products are synchronized,<br />
so, if not all your store products are also creaded in NextUp ERP,<br />
then only the ones that are will be updated.</li>
</ul>
<p>Once this connection is established, the following product information will be extracted from NextUp ERP.</p>
<h3>Stock quantity</h3>
<p>For storable NextUp ERP products, the stock quantity will be read, for the warehouse you selected in the extension configuration page.<br />
If the product is out-of-stock, then the out-of-stock status you configured will also be set.<br />
if the product is in-stock, the in-stock status you configured will also be set.</p>
<h3>Price</h3>
<p>The product price will be read from NextUp ERP, for the warehouse you selected in the extension configuration page, according to the following rules:</p>
<ul>
<li>the price actually assigned to the store product will not include any tax;</li>
<li>if the warehouse you selected does have a price for the product, then that price will be extracted;</li>
<li>otherwise: <ul>
<li>if you selected an <code>en-gross</code> warehouse, then the generic en-gross price will be extracted;</li>
<li>if you selected an <code>en-detail</code> warehouse, then the generic en-detail price will be extracted.</li>
</ul>
</li>
<li>if needed, the sale price without VAT will be calculated and will be rounded to 4 digit decimal precision.</li>
</ul>
<h3>Tax information</h3>
<p>The product tax information will be read from Nextup ERP and the following actions will be taken:</p>
<ul>
<li>a tax class will be created for the product's VAT quota value,<br />
if one does not already exist;</li>
<li>a percentage-type tax rate will be created for the products' VAT quota value,<br />
if one does not already exist and it will be assigned to the above mentioned tax class, based on the payment address<br />
and associated with the customer groups and geo zone selected in the extension configuration page;</li>
<li>the above mentioned tax class will be assigned to the store product.</li>
</ul>
<div class="mp-page-break"></div>
<h2>Connecting products</h2>
<h3>Individually</h3>
<p>To connect a single product, navigate to that product's editor page, then to the <code>Nextup ERP Integration</code> tab.<br />
If the product cannot be connected, a warning message will be displayed:</p>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/product-connect-nosku.png" alt="Product connect when no SKU set" title="Product connect when no SKU set" /></p>
</div>
<p>If the product can be connected, then the <code>Connect to NextUp ERP by SKU</code> button will be shown.<br />
Click it to connect the product. </p>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/connect-product.png" alt="Connect product" title="Connect product" /></p>
</div>
<p>If the operation has been successful, then a confirmation message will be displayed<br />
and the page will automatically reload in 5 seconds.</p>
<div class="mp-page-break"></div>
<h3>In bulk</h3>
<p>To connect products in bulk, navigate to <code>Catalog - Products</code>, check the desired products in the product list<br />
and then use the right-most button in the header button bar, the on with the plug icon:</p>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/products-bulk-connect.png" alt="Bulk connect button" title="Bulk connect button" /></p>
</div>
<p>For each selected product, the operation result will be shown below that product's row.</p>
<div class="mp-page-break"></div>
<h2>Consulting product connected status</h2>
<p>To see which products are connected to NextUp ERP navigate to <code>Catalog - Products</code>, and check the value of the <code>Connected to NextUp ERP</code> column:</p>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/products-connected-status.png" alt="Products connected status" title="Products connected status" /></p>
</div>
<div class="mp-page-break"></div>
<h2>Consulting NextUp ERP-related product information</h2>
<p>To view NextUP ERP-related product information for a product that has previously been connected to NextUp ERP,<br />
navigate to that product's editor page, then to the <code>Nextup ERP Integration</code> tab.</p>
<p>The following information is displayed:</p>
<ul>
<li><code>Connected to NextUp ERP</code> - whether or not the product is connected to NextUp ERP;</li>
<li><code>NextUp ERP article ID</code> - the internal NextUp ERP product ID;</li>
<li><code>NextUp ERP VAT option name</code> - the VAT option name assigned to the product in NextUp ERP;</li>
<li><code>NextUp ERP VAT quota value</code> - the VAT quota value  assigned to the product in NextUp ERP;</li>
<li><code>Batch tracking enabled</code> - whether or not batch tracking is enabled in NextUp ERP for the product.</li>
</ul>
<p>The following actions are available for connected products:</p>
<ul>
<li><code>Update entire information from NextUp ERP</code> - Updates both stock quantities and prices;</li>
<li><code>Update stock information from NextUp ERP</code> - Only updates stock quantities.</li>
</ul>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/product-connected-info.png" alt="Product connected info" title="Product connected info" /></p>
</div></div><div class="mp-page-contents-block mp-page-tools/sync-product-information">
	<h1>Sync product information in bulk</h1>
<p>In order to sync product information for all connected products, navigate to <code>NextUp ERP - Sync products</code>.<br />
You have the following options:</p>
<ul>
<li>sync all the product information (both stock quantities and prices) - choose <code>All information</code> from the available dropdown;</li>
<li>sync product stock quantities only - choose <code>Stocks only</code> from the available dropdown.</li>
</ul>
<p>Click the <code>Updated product information</code> button and wait for the operation to finish.<br />
When the operation is completed, a report will be displayed with:</p>
<ul>
<li><code>Eligible products</code> - then number of products that have been connected to NextUp ERP;</li>
<li><code>Updated products</code> - the number of products that have actually be updated.</li>
</ul>
<div class="mp-page-screenshot">
<p><img src="./system/storage/manual/html/images/sync-products-result.png" alt="Bulk sync products" title="Bulk sync products" /></p>
</div></div><div class="mp-page-contents-block mp-page-contact">
	<h1>Contact</h1>
<ul>
<li>e-mail: alexandru.boia@outlook.com</li>
<li>web: <a href="http://myclar.ro">http://myclar.ro</a></li>
<li>phone: +40 724 382 661</li>
</ul></div></div>